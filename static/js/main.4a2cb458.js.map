{"version":3,"file":"static/js/main.4a2cb458.js","mappings":"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","sources":["src/modelHandler/index.web.js","src/utils/utils.js","src/utils/renderBox/index.web.js","src/CameraView/index.web.js","src/utils/preprocess.js","App.js","webpack/bootstrap","webpack/runtime/amd define","webpack/runtime/amd options","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/create fake namespace object","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/node module decorator","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["/**\n * loadModel for web.\n * Load model via static url. Copying model to static folder via copy-webpack-plugin\n * see webpack.config.js\n */\nexport const modelURI = `${window.location.origin}/model/yolov5n-320/model.json`;\n","export class Colors {\n  // ultralytics color palette https://ultralytics.com/\n  constructor() {\n    this.palette = [\n      \"#FF3838\",\n      \"#FF9D97\",\n      \"#FF701F\",\n      \"#FFB21D\",\n      \"#CFD231\",\n      \"#48F90A\",\n      \"#92CC17\",\n      \"#3DDB86\",\n      \"#1A9334\",\n      \"#00D4BB\",\n      \"#2C99A8\",\n      \"#00C2FF\",\n      \"#344593\",\n      \"#6473FF\",\n      \"#0018EC\",\n      \"#8438FF\",\n      \"#520085\",\n      \"#CB38FF\",\n      \"#FF95C8\",\n      \"#FF37C7\",\n    ];\n    this.n = this.palette.length;\n  }\n\n  get = (i) => this.palette[Math.floor(i) % this.n];\n\n  static hexToRgba = (hex, alpha) => {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result\n      ? `rgba(${[parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)].join(\n          \", \"\n        )}, ${alpha})`\n      : null;\n  };\n}\n","import labels from \"../labels.json\";\nimport { Colors } from \"../utils\";\n\n/**\n * Render prediction boxes\n * @param {CanvasRenderingContext2D} ctx canvas rendering context\n * @param {number} classThreshold class threshold\n * @param {Array} boxes_data boxes array\n * @param {Array} scores_data scores array\n * @param {Array} classes_data class array\n * @param {Array[Number]} ratios boxes ratio [xRatio, yRatio]\n */\nexport const renderBoxes = (ctx, classThreshold, boxes_data, scores_data, classes_data, ratios) => {\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height); // clean canvas\n\n  const colors = new Colors();\n\n  // font configs\n  const font = `${Math.max(\n    Math.round(Math.max(ctx.canvas.width, ctx.canvas.height) / 40),\n    14\n  )}px Arial`;\n  ctx.font = font;\n  ctx.textBaseline = \"top\";\n\n  for (let i = 0; i < scores_data.length; ++i) {\n    // filter based on class threshold\n    if (scores_data[i] > classThreshold) {\n      const klass = labels[classes_data[i]];\n      const color = colors.get(classes_data[i]);\n      const score = (scores_data[i] * 100).toFixed(1);\n\n      let [x1, y1, x2, y2] = boxes_data.slice(i * 4, (i + 1) * 4);\n      x1 *= ctx.canvas.width * ratios[0];\n      x2 *= ctx.canvas.width * ratios[0];\n      y1 *= ctx.canvas.height * ratios[1];\n      y2 *= ctx.canvas.height * ratios[1];\n      const width = x2 - x1;\n      const height = y2 - y1;\n\n      // draw box.\n      ctx.fillStyle = Colors.hexToRgba(color, 0.2);\n      ctx.fillRect(x1, y1, width, height);\n      // draw border box.\n      ctx.strokeStyle = color;\n      ctx.lineWidth = Math.max(Math.min(ctx.canvas.width, ctx.canvas.height) / 200, 2.5);\n      ctx.strokeRect(x1, y1, width, height);\n\n      // Draw the label background.\n      ctx.fillStyle = color;\n      const textWidth = ctx.measureText(klass + \" - \" + score + \"%\").width;\n      const textHeight = parseInt(font, 10); // base 10\n      const yText = y1 - (textHeight + ctx.lineWidth);\n      ctx.fillRect(\n        x1 - 1,\n        yText < 0 ? 0 : yText, // handle overflow label box\n        textWidth + ctx.lineWidth,\n        textHeight + ctx.lineWidth\n      );\n\n      // Draw labels\n      ctx.fillStyle = \"#ffffff\";\n      ctx.fillText(klass + \" - \" + score + \"%\", x1 - 1, yText < 0 ? 0 : yText);\n    }\n  }\n};\n","import { useEffect, useRef } from \"react\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport { preprocess } from \"../utils/preprocess\";\nimport { renderBoxes } from \"../utils/renderBox\";\n\nconst CameraView = ({ type, model, inputTensorSize, config, children }) => {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const frameRef = useRef(null);\n  const [modelHeight, modelWidth] = inputTensorSize.slice(1, 3);\n  const typesMapper = { back: \"environment\", front: \"user\" };\n\n  /**\n   * Function to detect every frame loaded from webcam in video tag.\n   * @param {tf.GraphModel} model loaded YOLOv5 tensorflow.js model\n   */\n  const detectFrame = async () => {\n    tf.engine().startScope();\n    const rawInput = tf.browser.fromPixels(videoRef.current);\n    const [input, xRatio, yRatio] = preprocess(rawInput, modelWidth, modelHeight);\n    const ctx = canvasRef.current.getContext(\"2d\");\n\n    await model.executeAsync(input).then((res) => {\n      const [boxes, scores, classes] = res.slice(0, 3);\n      const boxes_data = boxes.dataSync();\n      const scores_data = scores.dataSync();\n      const classes_data = classes.dataSync();\n\n      renderBoxes(ctx, config.threshold, boxes_data, scores_data, classes_data, [xRatio, yRatio]);\n      tf.dispose([res, input, rawInput]);\n    });\n\n    frameRef.current = requestAnimationFrame(detectFrame); // get another frame\n    tf.engine().endScope();\n  };\n\n  useEffect(() => {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices\n        .getUserMedia({\n          audio: false,\n          video: {\n            facingMode: typesMapper[type],\n          },\n        })\n        .then((stream) => {\n          if (videoRef.current.srcObject) {\n            cancelAnimationFrame(frameRef.current);\n            frameRef.current = null;\n            videoRef.current.srcObject.getTracks().forEach((track) => {\n              track.stop();\n            });\n            videoRef.current.srcObject = null;\n          }\n\n          videoRef.current.srcObject = stream;\n        });\n    } else alert(\"Can't open Webcam!\");\n  }, [type]);\n\n  return (\n    <>\n      <div className=\"relative\">\n        <video\n          className=\"w-full max-w-screen-md max-h-fit rounded-lg\"\n          autoPlay\n          muted\n          onPlay={() => detectFrame()}\n          ref={videoRef}\n        />\n        <canvas\n          className=\"absolute top-0 left-0 w-full h-full\"\n          width={modelWidth}\n          height={modelHeight}\n          ref={canvasRef}\n        />\n        {children}\n      </div>\n    </>\n  );\n};\n\nexport default CameraView;\n","import * as tf from \"@tensorflow/tfjs\";\n\n/**\n * Preprocess image / frame before forwarded into the model\n * @param {tf.Tensor} img\n * @param {Number} modelWidth\n * @param {Number} modelHeight\n * @returns input tensor, xRatio and yRatio\n */\nexport const preprocess = (img, modelWidth, modelHeight) => {\n  let xRatio, yRatio; // ratios for boxes\n\n  const input = tf.tidy(() => {\n    // padding image to square => [n, m] to [n, n], n > m\n    const [h, w] = img.shape.slice(0, 2); // get source width and height\n    const maxSize = Math.max(w, h); // get max size\n    const imgPadded = img.pad([\n      [0, maxSize - h], // padding y [bottom only]\n      [0, maxSize - w], // padding x [right only]\n      [0, 0],\n    ]);\n\n    xRatio = maxSize / w; // update xRatio\n    yRatio = maxSize / h; // update yRatio\n\n    return tf.image\n      .resizeBilinear(imgPadded, [modelWidth, modelHeight]) // resize frame\n      .div(255.0) // normalize\n      .expandDims(0); // add batch\n  });\n\n  return [input, xRatio, yRatio];\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Text, TouchableOpacity, View } from \"react-native\";\nimport { Camera } from \"expo-camera\";\nimport { StatusBar } from \"expo-status-bar\";\nimport { MaterialCommunityIcons } from \"@expo/vector-icons\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport \"@tensorflow/tfjs-react-native\";\nimport { modelURI } from \"./src/modelHandler\";\nimport CameraView from \"./src/CameraView\";\n\nconst App = () => {\n  const [hasPermission, setHasPermission] = useState(null);\n  const [type, setType] = useState(\"back\");\n  const [model, setModel] = useState(null);\n  const [loading, setLoading] = useState({ loading: true, progress: 0 }); // loading state\n  const [inputTensor, setInputTensor] = useState([]);\n\n  // model configuration\n  const configurations = { threshold: 0.25 };\n\n  useEffect(() => {\n    (async () => {\n      const { status } = await Camera.requestCameraPermissionsAsync();\n      setHasPermission(status === \"granted\");\n      tf.ready().then(async () => {\n        const yolov5 = await tf.loadGraphModel(modelURI, {\n          onProgress: (fractions) => {\n            setLoading({ loading: true, progress: fractions }); // set loading fractions\n          },\n        }); // load model\n\n        // warming up model\n        const dummyInput = tf.ones(yolov5.inputs[0].shape);\n        await yolov5.executeAsync(dummyInput);\n        tf.dispose(dummyInput);\n\n        // set state\n        setInputTensor(yolov5.inputs[0].shape);\n        setModel(yolov5);\n        setLoading({ loading: false, progress: 1 });\n      });\n    })();\n  }, []);\n\n  return (\n    <View\n      style={{\n        flex: 1,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundColor: \"white\",\n      }}\n    >\n      {hasPermission ? (\n        <>\n          {loading.loading ? (\n            <Text style={{ fontSize: 20 }}>\n              Loading model... {`${(loading.progress * 100).toFixed(2)}%`}\n            </Text>\n          ) : (\n            <View style={{ flex: 1, width: \"100%\", height: \"100%\" }}>\n              <View\n                style={{\n                  flex: 1,\n                  width: \"100%\",\n                  height: \"100%\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                }}\n              >\n                <CameraView\n                  type={type}\n                  model={model}\n                  inputTensorSize={inputTensor}\n                  config={configurations}\n                >\n                  {/* <View\n                    style={{\n                      position: \"absolute\",\n                      left: 0,\n                      top: 0,\n                      width: \"100%\",\n                      height: \"100%\",\n                      flex: 1,\n                      justifyContent: \"flex-end\",\n                      alignItems: \"center\",\n                      backgroundColor: \"transparent\",\n                      zIndex: 20,\n                    }}\n                  >\n                    <TouchableOpacity\n                      style={{\n                        flex: 1,\n                        flexDirection: \"row\",\n                        alignItems: \"center\",\n                        backgroundColor: \"transparent\",\n                        borderWidth: 2,\n                        borderColor: \"white\",\n                        padding: 3,\n                        marginBottom: 10,\n                        borderRadius: 10,\n                      }}\n                      onPress={() =>\n                        setType((current) =>\n                          current === \"back\" ? \"front\" : \"back\"\n                        )\n                      }\n                    >\n                      <MaterialCommunityIcons\n                        style={{ marginHorizontal: 2 }}\n                        name=\"camera-flip\"\n                        size={30}\n                        color=\"white\"\n                      />\n                      <Text\n                        style={{\n                          marginHorizontal: 2,\n                          color: \"white\",\n                          fontSize: 20,\n                          fontWeight: \"bold\",\n                        }}\n                      >\n                        Flip Camera\n                      </Text>\n                    </TouchableOpacity>\n                  </View> */}\n                </CameraView>\n              </View>\n            </View>\n          )}\n        </>\n      ) : (\n        <View>\n          <Text style={{ fontSize: 20 }}>Permission not granted!</Text>\n        </View>\n      )}\n      <StatusBar style=\"auto\" />\n    </View>\n  );\n};\n\nexport default App;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [487], () => (__webpack_require__(5530)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["modelURI","window","location","origin","Colors","_createClass","_this","_classCallCheck","get","i","palette","Math","floor","n","this","length","hexToRgba","hex","alpha","result","exec","parseInt","join","_ref","type","model","inputTensorSize","config","children","videoRef","useRef","canvasRef","frameRef","_inputTensorSize$slic","slice","_inputTensorSize$slic2","_slicedToArray","modelHeight","modelWidth","typesMapper","back","front","detectFrame","_ref2","_asyncToGenerator","tf","startScope","rawInput","current","_preprocess","img","xRatio","yRatio","_img$shape$slice","shape","_img$shape$slice2","h","w","maxSize","max","imgPadded","pad","resizeBilinear","div","expandDims","preprocess","_preprocess2","input","ctx","getContext","executeAsync","then","res","_res$slice","_res$slice2","boxes","scores","classes","boxes_data","dataSync","scores_data","classes_data","classThreshold","ratios","clearRect","canvas","width","height","colors","font","round","textBaseline","klass","labels","color","score","toFixed","_boxes_data$slice","_boxes_data$slice2","x1","y1","x2","y2","fillStyle","fillRect","strokeStyle","lineWidth","min","strokeRect","textWidth","measureText","textHeight","yText","fillText","renderBoxes","threshold","requestAnimationFrame","endScope","apply","arguments","useEffect","navigator","mediaDevices","getUserMedia","audio","video","facingMode","stream","srcObject","cancelAnimationFrame","getTracks","forEach","track","stop","alert","_jsx","_Fragment","_jsxs","className","autoPlay","muted","onPlay","ref","_useState","useState","_useState2","hasPermission","setHasPermission","_useState3","_useState4","_useState5","_useState6","setModel","_useState7","loading","progress","_useState8","setLoading","_useState9","_useState10","inputTensor","setInputTensor","status","Camera","yolov5","onProgress","fractions","dummyInput","inputs","View","style","flex","alignItems","justifyContent","backgroundColor","Text","fontSize","CameraView","StatusBar","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","id","loaded","__webpack_modules__","call","m","amdD","Error","amdO","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","splice","r","getter","__esModule","d","a","leafPrototypes","getProto","getPrototypeOf","obj","t","value","mode","ns","create","def","indexOf","getOwnPropertyNames","definition","o","defineProperty","enumerable","g","globalThis","Function","e","prop","prototype","hasOwnProperty","Symbol","toStringTag","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","bind","push","__webpack_exports__"],"sourceRoot":""}