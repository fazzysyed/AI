(()=>{var e={5246:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var r=n(5861),a=n(885),i=n(5004),o=n(1054),l=n(9385),s=n(3528),u=n(3426),c=n(3624),d=(n(4267),`${window.location.origin}/model/yolov5n-320/model.json`);const f=JSON.parse('["10C","10D","10H","10S","2C","2D","2H","2S","3C","3D","3H","3S","4C","4D","4H","4S","5C","5D","5H","5S","6C","6D","6H","6S","7C","7D","7H","7S","8C","8D","8H","8S","9C","9D","9H","9S","AC","AD","AH","AS","JC","JD","JH","JS","KC","KD","KH","KS","QC","QD","QH","QS"]');var h=n(3144),v=n(5671),p=(0,h.default)((function e(){var t=this;(0,v.default)(this,e),this.get=function(e){return t.palette[Math.floor(e)%t.n]},this.palette=["#FF3838","#FF9D97","#FF701F","#FFB21D","#CFD231","#48F90A","#92CC17","#3DDB86","#1A9334","#00D4BB","#2C99A8","#00C2FF","#344593","#6473FF","#0018EC","#8438FF","#520085","#CB38FF","#FF95C8","#FF37C7"],this.n=this.palette.length}));p.hexToRgba=function(e,t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?`rgba(${[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)].join(", ")}, ${t})`:null};var g=n(2629);const y=function(e){var t=e.type,n=e.model,o=e.inputTensorSize,l=e.config,s=e.children,u=(0,i.useRef)(null),d=(0,i.useRef)(null),h=(0,i.useRef)(null),v=o.slice(1,3),y=(0,a.default)(v,2),m=y[0],x=y[1],b={back:"environment",front:"user"},S=function(){var e=(0,r.default)((function*(){c.engine().startScope();var e=c.browser.fromPixels(u.current),t=function(e,t,n){var r,i;return[c.tidy((function(){var o=e.shape.slice(0,2),l=(0,a.default)(o,2),s=l[0],u=l[1],d=Math.max(u,s),f=e.pad([[0,d-s],[0,d-u],[0,0]]);return r=d/u,i=d/s,c.image.resizeBilinear(f,[t,n]).div(255).expandDims(0)})),r,i]}(e,x,m),r=(0,a.default)(t,3),i=r[0],o=r[1],s=r[2],v=d.current.getContext("2d");yield n.executeAsync(i).then((function(t){var n=t.slice(0,3),r=(0,a.default)(n,3),u=r[0],d=r[1],h=r[2],g=u.dataSync(),y=d.dataSync(),m=h.dataSync();!function(e,t,n,r,i,o){e.clearRect(0,0,e.canvas.width,e.canvas.height);var l=new p,s=`${Math.max(Math.round(Math.max(e.canvas.width,e.canvas.height)/40),14)}px Arial`;e.font=s,e.textBaseline="top";for(var u=0;u<r.length;++u)if(r[u]>t){var c=f[i[u]],d=l.get(i[u]),h=(100*r[u]).toFixed(1),v=n.slice(4*u,4*(u+1)),g=(0,a.default)(v,4),y=g[0],m=g[1],x=g[2],b=g[3];y*=e.canvas.width*o[0],x*=e.canvas.width*o[0],m*=e.canvas.height*o[1];var S=x-y,j=(b*=e.canvas.height*o[1])-m;e.fillStyle=p.hexToRgba(d,.2),e.fillRect(y,m,S,j),e.strokeStyle=d,e.lineWidth=Math.max(Math.min(e.canvas.width,e.canvas.height)/200,2.5),e.strokeRect(y,m,S,j),e.fillStyle=d;var w=e.measureText(c+" - "+h+"%").width,C=parseInt(s,10),F=m-(C+e.lineWidth);e.fillRect(y-1,F<0?0:F,w+e.lineWidth,C+e.lineWidth),e.fillStyle="#ffffff",e.fillText(c+" - "+h+"%",y-1,F<0?0:F)}}(v,l.threshold,g,y,m,[o,s]),c.dispose([t,i,e])})),h.current=requestAnimationFrame(S),c.engine().endScope()}));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:b[t]}}).then((function(e){u.current.srcObject&&(cancelAnimationFrame(h.current),h.current=null,u.current.srcObject.getTracks().forEach((function(e){e.stop()})),u.current.srcObject=null),u.current.srcObject=e})):alert("Can't open Webcam!")}),[t]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("video",{className:"w-full max-w-screen-md max-h-fit rounded-lg",autoPlay:!0,muted:!0,onPlay:function(){return S()},ref:u}),(0,g.jsx)("canvas",{className:"absolute top-0 left-0 w-full h-full",width:x,height:m,ref:d}),s]})})};const m=function(){var e=(0,i.useState)(null),t=(0,a.default)(e,2),n=t[0],f=t[1],h=(0,i.useState)("back"),v=(0,a.default)(h,2),p=v[0],m=(v[1],(0,i.useState)(null)),x=(0,a.default)(m,2),b=x[0],S=x[1],j=(0,i.useState)({loading:!0,progress:0}),w=(0,a.default)(j,2),C=w[0],F=w[1],O=(0,i.useState)([]),D=(0,a.default)(O,2),M=D[0],A=D[1];return(0,i.useEffect)((function(){(0,r.default)((function*(){var e=(yield s.default.requestCameraPermissionsAsync()).status;f("granted"===e),c.ready().then((0,r.default)((function*(){var e=yield c.loadGraphModel(d,{onProgress:function(e){F({loading:!0,progress:e})}}),t=c.ones(e.inputs[0].shape);yield e.executeAsync(t),c.dispose(t),A(e.inputs[0].shape),S(e),F({loading:!1,progress:1})})))}))()}),[]),(0,g.jsxs)(l.default,{style:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"white"},children:[n?(0,g.jsx)(g.Fragment,{children:C.loading?(0,g.jsxs)(o.default,{style:{fontSize:20},children:["Loading model... ",`${(100*C.progress).toFixed(2)}%`]}):(0,g.jsx)(l.default,{style:{flex:1,width:"100%",height:"100%"},children:(0,g.jsx)(l.default,{style:{flex:1,width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,g.jsx)(y,{type:p,model:b,inputTensorSize:M,config:{threshold:.25}})})})}):(0,g.jsx)(l.default,{children:(0,g.jsx)(o.default,{style:{fontSize:20},children:"Permission not granted!"})}),(0,g.jsx)(u.default,{style:"auto"})]})}},5410:()=>{},8628:()=>{},1601:()=>{},7792:()=>{},4977:()=>{},5042:()=>{}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},(()=>{var e=[];n.O=(t,r,a,i)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,a,i]=e[c],l=!0,s=0;s<r.length;s++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(l=!1,i<o&&(o=i));if(l){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,a,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(i,o),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,i,[o,l,s]=r,u=0;if(o.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var c=s(n)}for(t&&t(r);u<o.length;u++)i=o[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[487],(()=>n(5530)));r=n.O(r)})();
//# sourceMappingURL=main.4a2cb458.js.map